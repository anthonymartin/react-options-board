(this["webpackJsonpreact-options-board"]=this["webpackJsonpreact-options-board"]||[]).push([[0],{12:function(e,t,a){"use strict";var n,r,c=a(9),o=a(19),i=a(10),l=(a(47),a(1)),s=(n=function e(){Object(o.a)(this,e),Object(c.a)(this,"focusedContract",r,this)},r=Object(i.a)(n.prototype,"focusedContract",[l.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n);t.a=new s},14:function(e,t,a){e.exports={boardWrapper:"OptionsBoard_boardWrapper___Fzvk",OptionsBoard:"OptionsBoard_OptionsBoard__38SjU",tableWrapper:"OptionsBoard_tableWrapper__2Hopj",bitcoinPrice:"OptionsBoard_bitcoinPrice__cXNm8",dateHeader:"OptionsBoard_dateHeader__1RcC2",rowDate:"OptionsBoard_rowDate__1un0o",bidAskColumnHeader:"OptionsBoard_bidAskColumnHeader__2l9SX",oiHeader:"OptionsBoard_oiHeader__3nlwr"}},20:function(e,t,a){e.exports={OptionsBoardTableBody:"OptionsBoardTableBody_OptionsBoardTableBody__2fbOI",dateHeader:"OptionsBoardTableBody_dateHeader__aFxLr"}},3:function(e,t,a){e.exports={OptionsBoardTableHead:"OptionsBoardTableHead_OptionsBoardTableHead__11JQ8",sticky:"OptionsBoardTableHead_sticky__IHD1D",strikeHeader:"OptionsBoardTableHead_strikeHeader__AnYa5",oiHeader:"OptionsBoardTableHead_oiHeader__1aXGR"}},30:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=Object(n.lazy)((function(){return Promise.resolve().then(a.bind(null,8))}));t.a=function(e){return r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(c,e))}},31:function(e,t,a){e.exports={strikePrice:"OptionRow_strikePrice__15Wfq"}},32:function(e,t,a){"use strict";a.r(t),a.d(t,"formatStrike",(function(){return u}));var n=a(0),r=a.n(n),c=a(31),o=a.n(c),i=Object(n.lazy)((function(){return a.e(3).then(a.bind(null,104))})),l=function(e){return r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(i,e))},s=new Intl.NumberFormat("en-US");function u(e){return s.format(e/100)}t.default=function(e){var t=e.put,a=e.call;return r.a.createElement("tr",{className:o.a.OptionRow,key:t.id},r.a.createElement(l,{key:1,contract:t}),r.a.createElement("td",{className:o.a.strikePrice},u(t.strike_price)),r.a.createElement(l,{key:2,contract:a,flipOI:!0}))}},4:function(e,t,a){e.exports={StrikePriceChart:"StrikePriceChart_StrikePriceChart__3zYBZ",chartWrapper:"StrikePriceChart_chartWrapper__qT1C0",chartDetail:"StrikePriceChart_chartDetail__2Nt6K",cellAsk:"StrikePriceChart_cellAsk__3KYNR",cellMidpoint:"StrikePriceChart_cellMidpoint__1M7VQ",cellBid:"StrikePriceChart_cellBid__hzlMa",cellOI:"StrikePriceChart_cellOI__73SGF"}},50:function(e,t,a){e.exports={h1:"App_h1__26v8a",h2:"App_h2__2_lG-",h3:"App_h3__nHoM5",h4:"App_h4__3RQAA",h5:"App_h5__2MPAr",h6:"App_h6__WS_ML",App:"App_App__16ZpL"}},54:function(e,t,a){e.exports=a(96)},59:function(e,t,a){},8:function(e,t,a){"use strict";a.r(t),a.d(t,"currencyFormatter",(function(){return c}));var n=a(0),r=a.n(n),c=new Intl.NumberFormat("en-US",{minimumFractionDigits:2});t.default=r.a.memo((function(e){var t,a;return e.price&&(a=e.price/100,t=c.format(a.toFixed(2))),e.children&&(t=e.children),r.a.createElement("span",{className:e.className},t||"-")}))},93:function(e,t){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(48),o=a.n(c),i=(a(59),a(49)),l=a.n(i),s=a(50),u=a.n(s),m=a(5),d=a(14),p=a.n(d),b=a(51),f=a.n(b),h=a(30),_=a(17),E=a.n(_),k=a(20),O=a.n(k),y=Object(n.lazy)((function(){return Promise.resolve().then(a.bind(null,32))})),v=function(e){return r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(y,e))},C=Object(n.lazy)((function(){return a.e(5).then(a.bind(null,102))})),j=function(e){return r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(C,e))};function N(e){var t=new Date(e);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t}function D(e,t){return(N(t)-N(e))/864e5}var w,S,B,x,g,H=r.a.memo((function(e){return r.a.createElement("tr",{className:E()(O.a.rowDate,O.a.dateHeader)},r.a.createElement("td",{colSpan:7},r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("strong",null,new Date(e.date).toLocaleDateString("en-US")))," - ",r.a.createElement("span",null,Math.round(D(new Date,new Date(e.date)))," days left"))))})),A=function(e){var t=(e.bitcoin.ask+e.bitcoin.bid)/2;return r.a.createElement("tbody",{className:O.a.OptionsBoardTableBody},e.contracts&&Object.entries(e.contracts).map((function(a){var n=Object(m.a)(a,2),c=n[0],o=n[1],i=o.map((function(a,n){var i=Object(m.a)(a,2),l=i[0],s=i[1];return r.a.createElement(r.a.Fragment,{key:l.id},(n>0&&e.bitcoin.ask&&e.bitcoin.bid&&l.strike_price>t&&o[n-1][0].strike_price<t||0===n&&l.strike_price>t)&&e.bitcoin.ask&&e.bitcoin.bid&&r.a.createElement(j,{key:c,bitcoinPrice:t}),r.a.createElement(v,Object.assign({key:l.id},{put:l,call:s})),n===o.length&&l.strike_price<t&&r.a.createElement(j,{key:c,bitcoinPrice:t}))}));return r.a.createElement(r.a.Fragment,{key:c},r.a.createElement(H,{date:c}),i)})))},P=a(18),M=a(3),T=a.n(M),z=r.a.memo((function(){var e;return r.a.createElement("thead",{className:E()((e={},Object(P.a)(e,T.a.OptionsBoardTableHead,!0),Object(P.a)(e,T.a.columnLabels,!0),Object(P.a)(e,T.a.sticky,!0),e))},r.a.createElement("tr",null,r.a.createElement("th",{className:T.a.oiHeader},r.a.createElement("span",null,"OI")),r.a.createElement("th",{className:T.a.bidAskColumnHeader},"Bid"),r.a.createElement("th",{className:T.a.bidAskColumnHeader},"Ask"),r.a.createElement("th",{className:T.a.strikeHeader},"Strike"),r.a.createElement("th",{className:T.a.bidAskColumnHeader},"Bid"),r.a.createElement("th",{className:T.a.bidAskColumnHeader},"Ask"),r.a.createElement("th",{className:T.a.oiHeader},r.a.createElement("span",null,"OI"))))})),I=Object(n.lazy)((function(){return a.e(4).then(a.bind(null,103))})),F=function(e){return r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(I,e))},W=a(9),L=a(19),U=a(10),R=(a(47),a(1)),J=new(w=function e(){Object(L.a)(this,e),Object(W.a)(this,"optionsContracts",S,this),Object(W.a)(this,"optionsDictionary",B,this),Object(W.a)(this,"nextDayContracts",x,this),Object(W.a)(this,"activeNextDayContract",g,this)},S=Object(U.a)(w.prototype,"optionsContracts",[R.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),B=Object(U.a)(w.prototype,"optionsDictionary",[R.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),x=Object(U.a)(w.prototype,"nextDayContracts",[R.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=Object(U.a)(w.prototype,"activeNextDayContract",[R.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w),G=a(7),Q=f()(""),X=Object(G.b)("ContractsStore")(Object(G.c)((function(e){Object(n.useEffect)((function(){fetch("https://lxboard.herokuapp.com/api/?after_ts=".concat((new Date).toISOString())).then((function(e){return e.json()})).then((function(e){var t=e.optionsContracts,a=e.optionsDictionary,n=e.nextDayContracts,r=e.activeNextDayContract;J.optionsContracts=t,J.optionsDictionary=a,J.nextDayContracts=n,J.activeNextDayContract=r})).catch((function(e){}))}),[]),Object(n.useEffect)((function(){return Q.on("message",(function(e){var t=JSON.parse(e);if(J.optionsDictionary&&J.optionsContracts){if(t.datetime=Date.now(),J.optionsContracts&&J.optionsDictionary[t.contract_id]){var a=Object(m.a)(J.optionsDictionary[t.contract_id],3),n=a[0],r=a[1],c=a[2];J.optionsContracts[n][r][c].booktops.unshift(t)}J.activeNextDayContract&&J.activeNextDayContract&&J.activeNextDayContract.id===t.contract_id&&J.activeNextDayContract.booktops.unshift(t)}})),function(){Q.emit("disconnect")}}),[]);var t=Object(n.useMemo)((function(){return r.a.createElement(F,null,r.a.createElement("h3",null,"Trade Bitcoin"))}),[]),a=Object(n.useMemo)((function(){return r.a.createElement(F,null,r.a.createElement("h3",null,"Call Options"),r.a.createElement("h3",null,"Put Options"))}),[]);return J&&J.activeNextDayContract&&J.optionsContracts&&Object.keys(J.optionsContracts).length?r.a.createElement("div",{className:p.a.boardWrapper},r.a.createElement("div",{className:p.a.OptionsBoard,"data-testid":"OptionsBoard"},t,r.a.createElement("div",{className:p.a.bitcoinPrice},r.a.createElement(h.a,{price:J.activeNextDayContract&&J.activeNextDayContract.booktops[0].bid||0})," / ",r.a.createElement(h.a,{price:J.activeNextDayContract&&J.activeNextDayContract.booktops[0].ask||0})),a,r.a.createElement("div",{className:p.a.tableWrapper},r.a.createElement("table",null,r.a.createElement(z,null),Object.keys(J.optionsContracts).length&&r.a.createElement(A,{contracts:J.optionsContracts,bitcoin:J.activeNextDayContract.booktops[0]}))))):r.a.createElement("div",null)}))),Y=a(4),q=a.n(Y),K=a(13),V=a.n(K),Z=a(98),$=a(52),ee=a.n($);var te=a(12),ae=a(8),ne=a(53),re=a.n(ne),ce=a(32);re()(V.a);var oe=Object(G.b)("UIStore","ContractsStore")(Object(G.c)((function(){var e=function(){var e="object"===typeof window,t=Object(n.useCallback)((function(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}),[e]),a=Object(n.useState)(t),r=Object(m.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){if(!e)return!1;function a(){o(t())}return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[t,e]),c}(),t=Object(n.useRef)(null),a=Object(n.useState)(),c=Object(m.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){if(o&&t.current){var e=t.current;setTimeout((function(){o.setSize(e.scrollWidth,e.scrollHeight)}),20)}}),[e,o]);var l=te.a&&te.a.focusedContract;if(!l)return r.a.createElement("div",null);if(!Object.keys(J.optionsContracts).length||!te.a.focusedContract)return r.a.createElement("div",null);var s=Object(m.a)(J.optionsDictionary[l],3),u=s[0],d=s[1],p=s[2],b=J.optionsContracts[u][d][p],f={title:{text:null,style:{color:"#000",font:'bold 16px "Trebuchet MS", Verdana, sans-serif'}},xAxis:{type:"datetime",title:{text:"Time"},labels:{formatter:function(e){return t=e.value,Object(Z.a)(t,"h:mm a");var t}}},legend:{enabled:!0},yAxis:{title:{text:"Price"},labels:{formatter:function(e){return ae.currencyFormatter.format(e.value)}}},tooltip:{formatter:function(e,t,a){var n;return"".concat((n=this.point.x,Object(Z.a)(n,"h:mm:ss a")),"<br />").concat(this.series.name," Price: ").concat(ae.currencyFormatter.format(this.point.y))}},chart:{zoomType:"x"},credits:{enabled:!1},series:[{type:"line",name:"Ask",step:!0,color:"rgb(5, 179, 227)",data:(b.booktops||[]).map((function(e){return[e.datetime,e.ask/100]}))},{type:"line",name:"Midpoint",color:"grey",step:!0,data:(b.booktops||[]).map((function(e){return[e.datetime,(e.bid+e.ask)/2/100]}))},{type:"line",name:"Bid",color:"rgb(53, 114, 158)",step:!0,data:(b.booktops||[]).map((function(e){return[e.datetime,e.bid/100]}))}]};return r.a.createElement("div",{className:q.a.StrikePriceChart},r.a.createElement(F,null,r.a.createElement("h3",null,"Strike Detail")),r.a.createElement("div",{className:q.a.chartDetail},r.a.createElement("div",null,r.a.createElement("h3",null,J.optionsContracts?b.type.charAt(0).toUpperCase()+b.type.slice(1)+" Option - "+Object(ce.formatStrike)(b.strike_price)+" Strike Price on "+new Date(b.date_expires).toLocaleDateString("en-us"):""),r.a.createElement("h4",null,Math.round(D(new Date,new Date(b.date_expires)))," days left")),r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:q.a.cellAsk},"Ask"),r.a.createElement("td",{className:q.a.cellAsk},ae.currencyFormatter.format(b.booktops[0].ask/100))),r.a.createElement("tr",null,r.a.createElement("td",{className:q.a.cellMidpoint},"Midpoint"),r.a.createElement("td",{className:q.a.cellMidpoint},ae.currencyFormatter.format((b.booktops[0].ask/100+b.booktops[0].bid/100)/2))),r.a.createElement("tr",null,r.a.createElement("td",{className:q.a.cellBid},"Bid"),r.a.createElement("td",{className:q.a.cellBid},b.booktops[0].bid?ae.currencyFormatter.format(b.booktops[0].bid/100):"None")),r.a.createElement("tr",null,r.a.createElement("td",{className:q.a.cellOI},"OI"),r.a.createElement("td",{className:q.a.cellOI},b.open_interest?Object(ce.formatStrike)(100*parseInt(b.open_interest)):"None")))))),r.a.createElement("div",{ref:t,style:{flex:"auto",overflow:"hidden",position:"relative"}},r.a.createElement(ee.a,{highcharts:V.a,options:f,allowChartUpdate:!0,containerProps:{style:{height:"100%"}},callback:function(e){i(e)}})))})));var ie=function(){return r.a.createElement(l.a,{className:u.a.App},r.a.createElement(G.a,{ContractsStore:J,UIStore:te.a},r.a.createElement(X,null),r.a.createElement(oe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.23205b99.chunk.js.map